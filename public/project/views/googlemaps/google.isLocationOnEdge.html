<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>Project Home Page</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100%;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBWOdGhVLsulyv7UixqXi2QwBuCjrqxUsg&libraries=geometry"></script>
    <script src="../../js/jquery-2.2.4.js"></script>
</head>
<body>
<h1>isLocationOnEdge Test</h1>
<input id="latlng" type="text" value="waiting for values"/>
<div id="map"></div>

</body>
<script>
    function initialize() {
        var myPosition = new google.maps.LatLng(42.353785, -71.132255);
        var testPosition = new google.maps.LatLng(42.353447, -71.132062);
        var mapOptions = {
            zoom: 40,
            center: myPosition,
            mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        var map = new google.maps.Map(document.getElementById('map'),
                mapOptions);

        var poly = "kgoaG~_dqLwE`A}AZo@iBA]I[k@{Bw@qCqF{S_AkD{A{GaBqGe@yAu@cBqBmEe@mAWaAU}@YcBk@{Ei@qEIKEACWZERCf@GbBK|@@`@?b@Db@DZ?J?zBd@tCp@pAXtATvADvAIxAUpAc@f@[b@[`@]b@i@|@wAfH_Pl@kB\\kBToBl@aP|Bge@vBiu@D_BCsAYqC?c@Jc@LWHIHEd@Cx@AlDC~@CVCbBk@zAi@`@@jB?TUNWt@mDT}@X[n@Uf@K~@Kr@BxAXf@Dd@ENC^k@Tm@NgAdIrAd@LxEhCl@XX[j@W`Aa@lAa@NGLGiA_ESq@";
     //   var encodePoints = "kgoaG~_dqLwE`A}AZo@iBA]I[k@{Bw@qCqF{S_AkD{A{GAs@g@mC}AmHIe@C[@s@Hm@Vu@Zc@XUTKb@ONYpBk@J?\DTAp@Sd@Uf@Yb@a@bB{BrByBPUdCwADKRMd@[`@a@bAkAx@wA|H}Ql@aBf@cBf@iBl@eB|EmKp@cBj@eBf@iB`@kB\oBVoBdEg_@P_CLeCDuBCwMC_n@DwAH{ATwDBoAEgLK{[@}AP}@HiADyA@}CGmBAmADu@H_@JONSZQTCP@LDVNRXPj@Fr@Ef@IX_@n@s@lA[nAAP?V@t@@JJb@JRlCzDFHf@TnEhGx@lAxCzDB?VTfGzHhCfDxAtBh@dAVt@rBbHvApFd@vARf@JE@?"
        var encodePoints = poly;
        var decodedPathPoints = google.maps.geometry.encoding.decodePath(encodePoints);
        var cascadiaFault = new google.maps.Polyline({
            path: decodedPathPoints
        });

        cascadiaFault.setMap(map);

        google.maps.geometry.poly.isLocationOnEdge(testPosition, cascadiaFault, 0.00015)
                ? alert("in location")
                : alert("outside location");
        google.maps.event.addListener(map, 'click', function(e) {

            var resultColor =
                    google.maps.geometry.poly.isLocationOnEdge(e.latLng, cascadiaFault, 0.00015) ?
                            'red' :
                            'green';

            new google.maps.Marker({
                position: e.latLng,
                map: map,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: resultColor,
                    fillOpacity: .2,
                    strokeColor: 'white',
                    strokeWeight: .5,
                    scale: 10
                }
            });
        });

    }
    initialize();
/*    function geolocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var geolocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                var circle = new google.maps.Circle({
                    center: geolocation,
                    radius: position.coords.accuracy
                });
                autocomplete.setBounds(circle.getBounds());
            });
        }
    }*/


    //google.maps.event.addDomListener(window, 'load', initialize);

  /*  function getGeolocation() {

        var options = {
            enableHighAccuracy: true,
            timeout: 20000,
            maximumAge: 0
        };


        navigator.geolocation.getCurrentPosition(success, error, options);

    }



    function success(pos) {
        var crd = pos.coords;

        console.log('Your current position is:');
        console.log('Latitude : ' + crd.latitude);
        console.log('Longitude: ' + crd.longitude);
        console.log('More or less ' + crd.accuracy + ' meters.');
        alert(crd.latitude + " "+ crd.longitude );
        $("#latlng").val(crd.latitude + " "+ crd.longitude );

    };

    function error(err) {
        console.warn('ERROR(' + err.code + '): ' + err.message);
        //alert('ERROR(' + err.code + '): ' + err.message);
        $.post("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyBWOdGhVLsulyv7UixqXi2QwBuCjrqxUsg", function (response) {
            $("#latlng").val(response.location.lat + " " + response.location.lng);
        }).error(function () {
            console.log("Error in fetching location !!!")
        });
    };

    getGeolocation()*/;




</script>
</html>